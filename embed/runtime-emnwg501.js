import{X as A}from"./runtime-zmh0xn4h.js";var L=!1,N=(q)=>{if(!L)console.warn("[GoSPA] No sanitizer configured - HTML will not be sanitized. Call setSanitizer() to configure.");return q};function w(q){L=!0,N=q}var W=new Map,X=new WeakMap,K=0;function z(){return`binding-${++K}`}function C(q){let G=z();if(!W.has(G))W.set(G,new Set);if(W.get(G).add(q),!X.has(q.element))X.set(q.element,new Set);return X.get(q.element).add(q),G}function I(q){let G=W.get(q);if(G)G.forEach((j)=>{let J=X.get(j.element);if(J){if(J.delete(j),J.size===0)X.delete(j.element)}}),W.delete(q)}async function $(q,G){let{element:j,type:J,attribute:F,transform:P}=q,D=P?P(G):G;switch(J){case"text":if(j instanceof HTMLElement||j instanceof SVGElement)j.textContent=String(D??"");break;case"html":if(j instanceof HTMLElement){let O=await N(String(D??""));j.innerHTML=O}break;case"value":if(j instanceof HTMLInputElement||j instanceof HTMLTextAreaElement||j instanceof HTMLSelectElement){if(j.value!==String(D??""))j.value=String(D??"")}break;case"checked":if(j instanceof HTMLInputElement)j.checked=Boolean(D);break;case"class":if(j instanceof Element){if(F)if(D)j.classList.add(F);else j.classList.remove(F);else if(typeof D==="string")j.className=D;else if(Array.isArray(D))j.className=D.join(" ");else if(typeof D==="object"&&D!==null)Object.entries(D).forEach(([O,U])=>{if(U)j.classList.add(O);else j.classList.remove(O)})}break;case"style":if(j instanceof HTMLElement||j instanceof SVGElement){if(F)j.style[F]=String(D??"");else if(typeof D==="string")j.setAttribute("style",D);else if(typeof D==="object"&&D!==null)Object.entries(D).forEach(([O,U])=>{j.style[O]=U})}break;case"attr":if(F)if(D===null||D===void 0||D===!1)j.removeAttribute(F);else if(D===!0)j.setAttribute(F,"");else j.setAttribute(F,String(D));break;case"prop":if(F&&j instanceof HTMLElement)j[F]=D;break}}function E(q,G,j={}){let J={type:j.type||"text",key:j.key||"",element:q,attribute:j.attribute,transform:j.transform},F=C(J);$(J,G.get()).catch((D)=>{console.error("[GoSPA] Binding update failed:",D)});let P=G.subscribe((D)=>{$(J,D).catch((O)=>{console.error("[GoSPA] Binding update failed:",O)})});return()=>{P(),I(F)}}function B(q,G){let j=q instanceof HTMLInputElement&&q.type==="checkbox",J=q instanceof HTMLInputElement&&q.type==="radio",F=q instanceof HTMLInputElement&&q.type==="number";if(j)q.checked=Boolean(G.get());else q.value=String(G.get()??"");let P=G.subscribe((O)=>{if(j)q.checked=Boolean(O);else if(q.value!==String(O??""))q.value=String(O??"")}),D=()=>{let O;if(j)O=q.checked;else if(F)O=q.value?parseFloat(q.value):0;else O=q.value;A(()=>{G.set(O)})};return q.addEventListener("input",D),q.addEventListener("change",D),()=>{P(),q.removeEventListener("input",D),q.removeEventListener("change",D)}}function h(q,G,j){let J=null,F=(D)=>{if(D){if(!J)J=G()}else if(J&&j)J=j();else J=null};F(q.get());let P=q.subscribe(F);return{element:J,cleanup:()=>{P()}}}function x(q,G,j){let J=document.createDocumentFragment(),F=document.createElement("div");J.appendChild(F);let P=new Map,D=(U)=>{let _=new Set;U.forEach((Y,Q)=>{let Z=j(Y,Q);if(_.add(Z),!P.has(Z)){let T=G(Y,Q);P.set(Z,{element:T,index:Q});let S=F.children[Q]||null;F.insertBefore(T,S)}else{let T=P.get(Z);if(T.index=Q,F.children[Q]!==T.element)F.insertBefore(T.element,F.children[Q]||null)}}),P.forEach((Y,Q)=>{if(!_.has(Q))Y.element.remove(),P.delete(Q)})};D(q.get());let O=q.subscribe(D);return{container:F,cleanup:()=>{O(),P.clear()}}}
export{N as M,w as N,C as O,I as P,E as Q,B as R,h as S,x as T};
